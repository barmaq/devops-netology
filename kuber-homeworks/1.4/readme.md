# Домашнее задание к занятию «Сетевое взаимодействие в K8S. Часть 1»

### Цель задания

В тестовой среде Kubernetes необходимо обеспечить доступ к приложению, установленному в предыдущем ДЗ и состоящему из двух контейнеров, по разным портам в разные контейнеры как внутри кластера, так и снаружи.

------


### Задание 1. Создать Deployment и обеспечить доступ к контейнерам приложения по разным портам из другого Pod внутри кластера

1. Создать Deployment приложения, состоящего из двух контейнеров (nginx и multitool), с количеством реплик 3 шт.
2. Создать Service, который обеспечит доступ внутри кластера до контейнеров приложения из п.1 по порту 9001 — nginx 80, по 9002 — multitool 8080.
3. Создать отдельный Pod с приложением multitool и убедиться с помощью `curl`, что из пода есть доступ до приложения из п.1 по разным портам в разные контейнеры.
4. Продемонстрировать доступ с помощью `curl` по доменному имени сервиса.
5. Предоставить манифесты Deployment и Service в решении, а также скриншоты или вывод команды п.4.


создаем манифесты	

[Deployment](./files/deployment.yaml)	
[Service](./files/svc.yaml)	


применяем	
```
kubectl apply -f .\files\deployment.yaml	
kubectl apply -f .\files\svc.yaml	
```

проверяем
```
kubectl get deployments
kubectl get svc
kubectl run -it --rm --image=wbitt/network-multitool dns-test --restart=Never -- sh	
```

результат
curl nginx-multitool-svc:9001	
![результат](./images/1-1.png)		

curl nginx-multitool-svc:9002		
![результат](./images/1-2.png)		



------

### Задание 2. Создать Service и обеспечить доступ к приложениям снаружи кластера

1. Создать отдельный Service приложения из Задания 1 с возможностью доступа снаружи кластера к nginx, используя тип NodePort.
2. Продемонстрировать доступ с помощью браузера или `curl` с локального компьютера.
3. Предоставить манифест и Service в решении, а также скриншоты или вывод команды п.2.

создаем манифест	
[Service](./files/svc-nodeport.yaml)	

применяем	
```
kubectl apply -f .\files\svc-nodeport.yaml	
```

проверяем	
```
kubectl get svc	
kubectl get nodes -o wide	
curl 192.168.253.203:30080	
```

![результат](./images/2-1.png)	



------


